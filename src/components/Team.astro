---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import { fullName } from '../utils/filters';

const socialsIcons = import.meta.glob<{ default: ImageMetadata }>(
	'../assets/icons/socials/*.{jpeg,jpg,png,gif,svg,ico}'
);

const teamMembers = [
	{
		firstname: 'Shaky',
		lastname: 'Lake',
		photoURL: '../assets/team/shaky-lake.png',
		post: 'Founder',
		socials: {
			twitter: '#',
			linkedIn: '#',
		},
	},
	{
		firstname: 'Baky',
		lastname: 'Hike',
		photoURL: '../assets/team/baky-hike.png',
		post: 'Co-founder',
		socials: {
			twitter: '#',
			linkedIn: '#',
		},
	},
	{
		firstname: 'Vania',
		lastname: 'Do',
		photoURL: '../assets/team/vania-do.png',
		post: 'Producer',
		socials: {
			twitter: '#',
			linkedIn: '#',
		},
	},
];
---

<section class="team">
	<div class="team__marquee marquee">
		<div class="marquee-content">
			<h2 class="team__title main-title">Team</h2>
		</div>
	</div>
	<div class="team__container">
		<div class="team__content">
			<div class="team__members">
				{
					teamMembers.map(member => (
						<div class="team-member" data-aos="zoom-out-up" data-aos-delay="100">
							<div class="team-member__photo">
								<Image
									src={member.photoURL}
									alt={fullName(member.firstname, member.lastname)}
								/>
							</div>
							<div class="team-member__data">
								<h3 class="team-member__name">
									{member.firstname + ' ' + member.lastname}
								</h3>
								<div class="team-member__job">{member.post}</div>
								<div class="team-member__socials socials">
									{Object.keys(member.socials).map(
										socialName =>
											socialsIcons[socialName] && (
												<a
													href={
														member.socials[socialName as keyof typeof member.socials]
													}
													class:list={['socials-button', socialName]}>
													<Image
														src={socialsIcons[socialName]()}
														alt={`${fullName(member.firstname, member.lastname)}'s ${socialName}`}
													/>
												</a>
											)
									)}
								</div>
								<div class="team-member__desc">
									<p>
										Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
										eiusmod tempor incididunt
									</p>
								</div>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</div>
</section>

<style lang="scss">
	.team {
		background-color: $mainbgc;
		&__marquee {
			@extend .artists__marquee;
		}
		&__title {
			@extend .artists__title;
		}
		&__container {
			@include adaptiv-value('padding-top', 120, 55);
			@include adaptiv-value('padding-bottom', 120, 65);
		}
		&__content {
			@media (max-width: $bp1280) {
				padding: 0px 15px;
			}
		}
		&__members {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
			@media (max-width: $bp760) {
				grid-template-columns: minmax(200px, 1fr);
			}
			@include adaptiv-value('grid-column-gap', 100, 45);
			grid-row-gap: 50px;
		}

		&-member {
			@media (max-width: $bp760) {
				border-bottom: 1px solid rgba($txtcolor, 0.5);
				padding: 0px 10px 15px 10px;
				justify-self: center;
				max-width: 400px;
			}
			&__photo {
				display: flex;
				justify-content: center;
				img {
					display: block;
					max-width: 100%;
					height: auto;
					@media (max-width: $bp1024) {
						max-width: 85%;
					}
					@media (max-width: $bp760) {
						max-width: 60%;
					}
				}
			}
			&__data {
				margin-top: 1.2em;
				text-align: center;
			}
			&__name {
				font-size: 1.3125em;
				line-height: 1.32;
				text-transform: uppercase;
				margin-bottom: 0.87em;
			}
			&__job {
				@extend .our-partners__title;
			}
			&__socials {
				margin: 1.37em 0;
				justify-content: center;
			}
			&__desc {
				@extend .block-text__text;
			}
		}
	}
</style>
